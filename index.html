<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LG AI</title>
<style>
body { margin:0; font-family:sans-serif; background:#0b0b0b; color:#f8e9d2; }
.app { max-width:900px; margin:40px auto; padding:20px; border-radius:15px; background:#101010; }
header { text-align:center; margin-bottom:20px; }
header h1 { color:#ffd700; }
.messages { height:400px; overflow-y:auto; padding:10px; border-radius:12px; background:#121212; display:flex; flex-direction:column; gap:10px; }
.msg { max-width:80%; padding:10px; border-radius:10px; }
.msg.user { background:#554433; align-self:flex-end; }
.msg.bot { background:#2a2a2a; align-self:flex-start; }
.input-area { display:flex; gap:10px; margin-top:10px; }
textarea { flex:1; padding:10px; border-radius:10px; border:1px solid #444; background:#0d0d0d; color:#f8e9d2; resize:none; }
button { padding:10px 15px; border:none; border-radius:10px; background:#ffd700; color:#0b0b0b; cursor:pointer; }
</style>
</head>
<body>
<div class="app">
  <header>
    <h1>LG AI</h1>
    <p>Erudite conversational assistant</p>
  </header>
  <div class="messages" id="messages"></div>
  <div class="input-area">
    <textarea id="userInput" rows="3" placeholder="Type your message here..."></textarea>
    <button id="sendBtn">Send</button>
  </div>
</div>
<script>
const messagesEl = document.getElementById('messages');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');

function addMessage(text, sender='bot'){
  const div = document.createElement('div');
  div.className = 'msg ' + sender;
  div.textContent = text;
  messagesEl.appendChild(div);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

async function sendMessage(){
  const text = userInput.value.trim();
  if(!text) return;
  addMessage(text,'user');
  userInput.value = '';
  addMessage('[thinking...]','bot');
  const thinkingNode = messagesEl.lastChild;
  try{
    const res = await fetch('/api/chat',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ prompt: text, tone: "Accessible" })
    });
    const data = await res.json();
    thinkingNode.remove();
    addMessage(data.reply,'bot');
  }catch(e){
    thinkingNode.remove();
    addMessage('Error contacting server.','bot');
    console.error(e);
  }
}

sendBtn.addEventListener('click', sendMessage);
userInput.addEventListener('keydown', e=>{
  if(e.key==='Enter' && !e.shiftKey){
    e.preventDefault();
    sendBtn.click();
  }
});
</script>
</body>
</html>
